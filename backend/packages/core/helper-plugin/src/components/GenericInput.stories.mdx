{/* - GenericInput.stories.mdx - */}

import { useState } from 'react';
import { Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import { Grid, GridItem } from '@strapi/design-system';
import { HeaderLayout, ContentLayout } from '@strapi/design-system';
import { Main } from '@strapi/design-system';
import { Flex } from '@strapi/design-system';
import { Box } from '@strapi/design-system';
import set from 'lodash/set';
import { GenericInput } from './GenericInput';

<Meta title="components/GenericInput" component={GenericInput} />

# GenericInput

This is the doc of the `GenericInput` component

## GenericInput

Description...

<Canvas>
  <Story name="base">
    {() => {
      const layout = [
        [
          {
            intlLabel: {
              id: 'Auth.form.firstname.label',
              defaultMessage: 'First name',
            },
            name: 'firstname',
            placeholder: {
              id: 'Auth.form.firstname.placeholder',
              defaultMessage: 'e.g. Kai',
            },
            type: 'text',
            size: {
              col: 6,
              xs: 12,
            },
          },
        ],
        [
          {
            intlLabel: {
              id: 'Auth.form.email.label',
              defaultMessage: 'Email',
            },
            name: 'email',
            placeholder: {
              id: 'Auth.form.email.placeholder',
              defaultMessage: 'e.g. kai.doe@strapi.io',
            },
            type: 'email',
            size: {
              col: 6,
              xs: 12,
            },
          },
          {
            intlLabel: {
              id: 'Auth.form.username.label',
              defaultMessage: 'Username',
            },
            name: 'username',
            placeholder: {
              id: 'Auth.form.username.placeholder',
              defaultMessage: 'e.g. Kai_Doe',
            },
            type: 'text',
            size: {
              col: 6,
              xs: 12,
            },
          },
        ],
        [
          {
            intlLabel: {
              id: 'global.password',
              defaultMessage: 'Password',
            },
            name: 'password',
            type: 'password',
            size: {
              col: 6,
              xs: 12,
            },
          },
        ],
        [
          {
            intlLabel: {
              id: 'Auth.form.active.label',
              defaultMessage: 'Boolean: Nullable',
            },
            isNullable: true,
            name: 'isNullable',
            type: 'bool',
            size: {
              col: 2,
              xs: 12,
            },
          },
          {
            intlLabel: {
              id: 'Auth.form.active.label',
              defaultMessage: 'Boolean: Active by default',
            },
            name: 'isActiveByDefault',
            type: 'bool',
            size: {
              col: 2,
              xs: 12,
            },
          },
          {
            intlLabel: {
              id: 'Auth.form.inactive.label',
              defaultMessage: 'Boolean: Inactive by default',
            },
            name: 'isInactiveByDefault',
            type: 'bool',
            size: {
              col: 2,
              xs: 12,
            },
          },
          {
            name: 'private',
            type: 'checkbox',
            size: {
              col: 6,
              xs: 12,
            },
            intlLabel: {
              id: 'form.attribute.item.privateField',
              defaultMessage: 'Private field',
            },
            description: {
              id: 'form.attribute.item.privateField.description',
              defaultMessage: 'This field will not show up in the API response',
            },
          },
          {
            intlLabel: { id: 'meal', defaultMessage: 'meal' },
            name: 'meal',
            type: 'select',
            size: {
              col: 6,
              xs: 12,
            },
            options: [
              {
                key: 'pizza',
                value: 'pizza',
                metadatas: {
                  intlLabel: { id: 'pizza-label', defaultMessage: 'Pizzza' },
                  disabled: false,
                  hidden: false,
                },
              },
              {
                key: 'sandwich',
                value: 'sandwich',
                metadatas: {
                  intlLabel: { id: 'sandwich-label', defaultMessage: 'Sandwich' },
                  disabled: false,
                  hidden: false,
                },
              },
            ],
          },
        ],
      ];
      const [state, setState] = useState({
        firstname: 'ee',
        email: '',
        private: null,
        isNullable: null,
        isActiveByDefault: true,
        isInactiveByDefault: false,
      });
      return (
        <ContentLayout>
          <Flex direction="column" alignItems="stretch" gap={4}>
            {layout.map((row, rowIndex) => {
              return (
                <Box key={rowIndex}>
                  <Grid gap={4}>
                    {row.map((input) => {
                      return (
                        <GridItem key={input.name} {...input.size}>
                          <GenericInput
                            {...input}
                            value={state[input.name]}
                            onChange={({ target: { name, value } }) => {
                              setState((prev) => {
                                return { ...prev, [name]: value };
                              });
                            }}
                          />
                        </GridItem>
                      );
                    })}
                  </Grid>
                </Box>
              );
            })}
          </Flex>
        </ContentLayout>
      );
    }}
  </Story>
</Canvas>
